BEGIN;

-- seed helpers
CREATE
OR REPLACE FUNCTION create_supabase_user(email TEXT, _first_name TEXT, _last_name TEXT) RETURNS UUID SECURITY DEFINER AS $$
DECLARE
  user_id UUID;
BEGIN
  user_id := uuid_generate_v4();

  INSERT INTO auth.users (
    "instance_id",
    "id",
    "aud",
    "role",
    "email",
    "encrypted_password",
    "email_confirmed_at",
    "invited_at",
    "confirmation_token",
    "confirmation_sent_at",
    "recovery_token",
    "recovery_sent_at",
    "email_change_token_new",
    "email_change",
    "email_change_sent_at",
    "last_sign_in_at",
    "raw_app_meta_data",
    "raw_user_meta_data",
    "is_super_admin",
    "created_at",
    "updated_at",
    "phone",
    "phone_confirmed_at",
    "phone_change",
    "phone_change_token",
    "phone_change_sent_at",
    "email_change_token_current",
    "email_change_confirm_status",
    "banned_until",
    "reauthentication_token",
    "reauthentication_sent_at",
    "is_sso_user"
  ) VALUES (
    '00000000-0000-0000-0000-000000000000',
    user_id,
    'authenticated',
    'authenticated',
    email,
    crypt('password123!',
      gen_salt('bf')),
    '2023-02-18 23:31:13.017218+00',
    NULL,
    '',
    '2023-02-18 23:31:12.757017+00',
    '',
    NULL,
    '',
    '',
    NULL,
    '2023-02-18 23:31:13.01781+00',
    '{"provider": "email",
    "providers": ["email"]}',
    json_build_object('test_identifier',
      email,
    'first_name',
    _first_name,
    'last_name',
    _last_name),
    NULL,
    now(),
    now(),
    NULL,
    NULL,
    '',
    '',
    NULL,
    '',
    0,
    NULL,
    '',
    NULL,
    'f'
  );

  RETURN user_id;
END;
$$ LANGUAGE plpgsql;

CREATE
OR REPLACE FUNCTION create_profile(
  company_id UUID,
  email TEXT,
  first_name TEXT,
  last_name TEXT,
  _role TEXT,
  _email_engine_account TEXT DEFAULT NULL,
  _email_engine_email TEXT DEFAULT NULL
) RETURNS RECORD SECURITY DEFINER LANGUAGE plpgsql AS $$
DECLARE
  user_id UUID;
  _row RECORD;
BEGIN
  user_id := create_supabase_user(email, first_name, last_name);

  INSERT INTO profiles
    (id, email, last_name, first_name, user_role, company_id, email_engine_account_id, sequence_send_email)
  VALUES
    (user_id, email, last_name, first_name, _role, company_id, _email_engine_account, _email_engine_email)
  RETURNING * INTO _row;
  RETURN _row;
END;
$$;

CREATE
OR REPLACE FUNCTION create_company(
  company_name TEXT,
  website TEXT,
  subscription_status TEXT,
  subscription_current_period_start TIMESTAMP WITH TIME ZONE DEFAULT now(),
  subscription_current_period_end TIMESTAMP WITH TIME ZONE DEFAULT '2025-01-01 00:00:00.000000+00',
  subscription_start_date TIMESTAMP WITH TIME ZONE DEFAULT now(),
  subscription_end_date TIMESTAMP WITH TIME ZONE DEFAULT '2025-01-01 00:00:00.000000+00'
) RETURNS RECORD SECURITY DEFINER LANGUAGE plpgsql AS $$
DECLARE
  _row RECORD;
BEGIN
  INSERT INTO companies
    (
      id,
      name,
      website,
      subscription_status,
      cus_id,
      subscription_current_period_end,
      subscription_current_period_start,
      subscription_end_date,
      subscription_start_date,
      profiles_limit,
      searches_limit,
      ai_email_generator_limit
    )
  VALUES
    (
      uuid_generate_v4(),
      company_name,
      website,
      subscription_status,
      'cus_NKXV4aQYAU7GXG',
      subscription_current_period_end,
      now(),
      subscription_end_date,
      subscription_start_date,
      100000000,
      100000000,
      100000000
    )
  RETURNING * INTO _row;
  RETURN _row;
END;
$$;

CREATE
OR REPLACE FUNCTION create_company_category(company UUID, category TEXT) RETURNS RECORD SECURITY DEFINER LANGUAGE plpgsql AS $$
  DECLARE
    _row RECORD;
  BEGIN
    INSERT INTO company_categories
      (
        category,
        company_id
      )
    VALUES
      (
        category,
        company
      )
    RETURNING * INTO _row;
    RETURN _row;
  END;
$$;

CREATE
OR REPLACE FUNCTION create_campaign(
  company_id UUID,
  campaign_name TEXT,
  campaign_description TEXT,
  product_name TEXT,
  tags TEXT[]
) RETURNS RECORD SECURITY DEFINER LANGUAGE plpgsql AS $$
  DECLARE
    _row RECORD;
  BEGIN
    INSERT INTO campaigns
      (
        id,
        created_at,
        company_id,
        name,
        description,
        product_name,
        tag_list,
        target_locations,
        budget_cents,
        budget_currency,
        promo_types,
        status
      )
    VALUES
      (
        uuid_generate_v4(),
        now(),
        company_id,
        campaign_name,
        campaign_description,
        product_name,
        tags,
        ARRAY['United States of America'],
        1000,
        'USD',
        ARRAY['Dedicated Video', 'Integrated Video'],
        'in progress'
      )
    RETURNING * INTO _row;
    RETURN _row;
  END;
$$;

CREATE
OR REPLACE FUNCTION create_campaign_creator(
  campaign_id UUID,
  added_by_id UUID,
  avatar_url TEXT,
  creator_id TEXT,
  fullname TEXT,
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT now()
) RETURNS RECORD SECURITY DEFINER LANGUAGE plpgsql AS $$
  DECLARE
    _row RECORD;
  BEGIN
    INSERT INTO campaign_creators
      (
        id,
        avatar_url,
        creator_id,
        added_by_id,
        payment_rate,
        rate_currency,
        payment_status,
        paid_amount,
        payment_currency,
        sample_status,
        platform,
        status,
        campaign_id,
        next_step,
        fullname,
        updated_at
      )
    VALUES
      (
        uuid_generate_v4(),
        avatar_url,
        creator_id,
        added_by_id,
        0,
        'USD',
        'unpaid',
        0,
        'USD',
        'unsent',
        'youtube',
        'to contact',
        campaign_id,
        'Return email',
        fullname,
        updated_at
      )
    RETURNING * INTO _row;
    RETURN _row;
  END;
$$;

CREATE
OR REPLACE FUNCTION create_sequence(
  company_id UUID,
  NAME TEXT,
  manager_first_name TEXT,
  manager_id UUID
) RETURNS RECORD SECURITY DEFINER LANGUAGE plpgsql AS $$
  DECLARE
    _row RECORD;
  BEGIN
    INSERT INTO sequences
      (
        id,
        created_at,
        updated_at,
        company_id,
        name,
        auto_start,
        manager_first_name,
        manager_id
      )
    VALUES
      (
        uuid_generate_v4(),
        now(),
        now(),
        company_id,
        name,
        false,
        manager_first_name,
        manager_id
      )
    RETURNING * INTO _row;
    RETURN _row;
  END;
$$;

CREATE
OR REPLACE FUNCTION create_sequence_steps(
  sequence_id UUID,
  NAME TEXT,
  template_id TEXT,
  step_number NUMERIC,
  wait_time_hours NUMERIC
) RETURNS RECORD SECURITY DEFINER LANGUAGE plpgsql AS $$
  DECLARE
    _row RECORD;
  BEGIN
    INSERT INTO sequence_steps
      (
        id,
        created_at,
        updated_at,
        sequence_id,
        name,
        template_id,
        step_number,
        wait_time_hours
      )
    VALUES
      (
        uuid_generate_v4(),
        now(),
        now(),
        sequence_id,
        name,
        template_id,
        step_number,
        wait_time_hours
      )
    RETURNING * INTO _row;
    RETURN _row;
  END;
$$;

CREATE
OR REPLACE FUNCTION create_sequence_influencer(
  company_id UUID,
  sequence_id UUID,
  added_by UUID,
  influencer_social_profile_id UUID,
  email TEXT,
  funnel_status TEXT,
  sequence_step NUMERIC DEFAULT 0,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT now()
) RETURNS RECORD SECURITY DEFINER LANGUAGE plpgsql AS $$
  DECLARE
    _row RECORD;
    _platform TEXT;
    _name TEXT;
    _url TEXT;
    _username TEXT;
  BEGIN
    _platform := (
      SELECT platform
      FROM influencer_social_profiles
      WHERE id = influencer_social_profile_id
    );
    _name := (
      SELECT name
      FROM influencer_social_profiles
      WHERE id = influencer_social_profile_id
    );
    _url := (
      SELECT url
      FROM influencer_social_profiles
      WHERE id = influencer_social_profile_id
    );
    _username := (
      SELECT username
      FROM influencer_social_profiles
      WHERE id = influencer_social_profile_id
    );
    INSERT INTO sequence_influencers
      (
        id,
        created_at,
        updated_at,
        company_id,
        sequence_id,
        added_by,
        email,
        funnel_status,
        influencer_social_profile_id,
        next_step,
        rate_amount,
        rate_currency,
        real_full_name,
        scheduled_post_date,
        sequence_step,
        tags,
        video_details,
        iqdata_id,
        social_profile_last_fetched,
        platform,
        name,
        url,
        username,
        avatar_url
      )
    VALUES
      (
        uuid_generate_v4(),
        created_at,
        now(),
        company_id,
        sequence_id,
        added_by,
        email,
        funnel_status,
        influencer_social_profile_id,
        'next_step',
        543,
        'USD',
        'real_full_name',
        '2027-01-01 00:00:00.000000+00',
        sequence_step,
        ARRAY['tag1', 'tag2'],
        'video_details',
        uuid_generate_v4(),
        now(),
        _platform,
        _name,
        _url,
        _username,
        'https://image-cache.relay.club/?link=https://yt3.googleusercontent.com/ytc/AOPolaSe-ifBRtdfb67uDM8kaHdhdPdQny-MaSRdBfT2NA=s480-c-k-c0x00ffffff-no-rj'
      )
    RETURNING * INTO _row;
    RETURN _row;
  END;
$$;

CREATE
OR REPLACE FUNCTION create_influencer(
  _name TEXT,
  _email TEXT,
  _address TEXT,
  _avatar_url TEXT,
  _is_recommended BOOLEAN DEFAULT FALSE
) RETURNS RECORD SECURITY DEFINER LANGUAGE plpgsql AS $$
DECLARE
_row RECORD;
BEGIN
INSERT INTO influencers (
  id,
  name,
  email,
  address,
  avatar_url,
  is_recommended,
  created_at
)
VALUES (
  uuid_generate_v4(),
  _name,
  _email,
  _address,
  _avatar_url,
  _is_recommended,
  now()
)
RETURNING * INTO _row;
RETURN _row;
END;
$$;

CREATE
OR REPLACE FUNCTION create_influencer_social_profile(
  _url TEXT,
  _platform TEXT,
  _influencer_id UUID,
  _reference_id TEXT,
  _username TEXT,
  _name TEXT,
  _email TEXT,
  _avatar_url TEXT DEFAULT 'https://image-cache.relay.club/?link=https://yt3.googleusercontent.com/ytc/AOPolaSe-ifBRtdfb67uDM8kaHdhdPdQny-MaSRdBfT2NA=s480-c-k-c0x00ffffff-no-rj',
  _recent_post_title TEXT DEFAULT 'Recent Video Title',
  _recent_post_url TEXT DEFAULT 'https://example.com/recent-video'
) RETURNS RECORD SECURITY DEFINER LANGUAGE plpgsql AS $$
DECLARE
_row RECORD;
BEGIN
INSERT INTO influencer_social_profiles (
  id,
  url,
  platform,
  influencer_id,
  reference_id,
  username,
  created_at,
  name,
  email,
  avatar_url,
  recent_post_title,
  recent_post_url
)
VALUES (
  uuid_generate_v4(),
  _url,
  _platform,
  _influencer_id,
  _reference_id,
  _username,
  now(),
  _name,
  _email,
  _avatar_url,
  _recent_post_title,
  _recent_post_url
)
RETURNING * INTO _row;
RETURN _row;
END;
$$;

CREATE
OR REPLACE FUNCTION create_sequence_email(
  _sequence_id UUID,
  _sequence_influencer_id UUID,
  _sequence_step_id UUID,
  _email_message_id TEXT DEFAULT NULL,
  _email_delivery_status TEXT DEFAULT NULL,
  _email_tracking_status TEXT DEFAULT NULL,
  _email_send_at TIMESTAMP WITH TIME ZONE DEFAULT NULL,
  _updated_at TIMESTAMP WITH TIME ZONE DEFAULT now()
) RETURNS RECORD SECURITY DEFINER LANGUAGE plpgsql AS $$
DECLARE
_row RECORD;
BEGIN
INSERT INTO sequence_emails (
  id,
  created_at,
  updated_at,
  sequence_id,
  sequence_influencer_id,
  sequence_step_id,
  email_message_id,
  email_delivery_status,
  email_tracking_status,
  email_send_at
)
VALUES (
  uuid_generate_v4(),
  now(),
  _updated_at,
  _sequence_id,
  _sequence_influencer_id,
  _sequence_step_id,
  _email_message_id,
  _email_delivery_status,
  _email_tracking_status,
  _email_send_at

)
RETURNING * INTO _row;
RETURN _row;
END;
$$;

CREATE
OR REPLACE FUNCTION create_influencer_post(
  _url TEXT,
  _campaign_id UUID,
  _influencer_social_profile_id UUID,
  _platform TEXT,
  _type TEXT DEFAULT 'video',
  _is_reusable BOOLEAN DEFAULT FALSE
) RETURNS RECORD SECURITY DEFINER LANGUAGE plpgsql AS $$
DECLARE
_row RECORD;
BEGIN
INSERT INTO influencer_posts (
  id,
  url,
  campaign_id,
  influencer_social_profile_id,
  platform,
  type,
  is_reusable,
  created_at,
  updated_at,
  publish_date
)
VALUES (
  uuid_generate_v4(),
  _url,
  _campaign_id,
  _influencer_social_profile_id,
  _platform,
  _type,
  _is_reusable,
  now(),
  now(),
  now()
)
RETURNING * INTO _row;
RETURN _row;
END;
$$;

CREATE
OR REPLACE FUNCTION create_posts_performance(
  _campaign_id UUID,
  _influencer_social_profile_id UUID,
  _post_id UUID,
  _updated_at TIMESTAMP WITH TIME ZONE DEFAULT now(),
  _likes_total NUMERIC DEFAULT 0,
  _views_total NUMERIC DEFAULT 0,
  _comments_total NUMERIC DEFAULT 0,
  _orders_total NUMERIC DEFAULT 0,
  _sales_total NUMERIC DEFAULT 0,
  _sales_revenue NUMERIC DEFAULT 0
) RETURNS RECORD SECURITY DEFINER LANGUAGE plpgsql AS $$
DECLARE
_row RECORD;
BEGIN
INSERT INTO posts_performance (
  id,
  campaign_id,
  influencer_social_profile_id,
  post_id,
  created_at,
  updated_at,
  likes_total,
  views_total,
  comments_total,
  orders_total,
  sales_total,
  sales_revenue
)
VALUES (
  uuid_generate_v4(),
  _campaign_id,
  _influencer_social_profile_id,
  _post_id,
  now(),
  _updated_at,
  _likes_total,
  _views_total,
  _comments_total,
  _orders_total,
  _sales_total,
  _sales_revenue
)
RETURNING * INTO _row;
RETURN _row;
END;
$$;

CREATE
OR REPLACE FUNCTION create_template_variable(
  _sequence_id UUID,
  _key TEXT,
  _name TEXT,
  _value TEXT DEFAULT '',
  _required BOOLEAN DEFAULT TRUE
) RETURNS RECORD SECURITY DEFINER LANGUAGE plpgsql AS $$
DECLARE
_row RECORD;
BEGIN
INSERT INTO template_variables (
  id,
  created_at,
  updated_at,
  key,
  name,
  value,
  sequence_id,
  required
)
VALUES (
  uuid_generate_v4(),
  now(),
  now(),
  _key,
  _name,
  _value,
  _sequence_id,
  _required
)
RETURNING * INTO _row;
RETURN _row;
END;
$$;

CREATE
OR REPLACE FUNCTION create_boostbot_conversation(
  _profile_id UUID,
  _chat_messages jsonb,
  _search_results jsonb
) RETURNS RECORD SECURITY DEFINER LANGUAGE plpgsql AS $$
  DECLARE
    _row RECORD;
  BEGIN
    INSERT INTO boostbot_conversations
      (
        id,
        created_at,
        profile_id,
        chat_messages,
        search_results
      )
    VALUES
      (
        uuid_generate_v4(),
        now(),
        _profile_id,
        _chat_messages,
        _search_results
      )
    RETURNING * INTO _row;
    RETURN _row;
  END;
$$;

-- seed data
DO $$
DECLARE
_company_test RECORD;
_company_relay RECORD;
_company_expired RECORD;
_profile_william RECORD;
_profile_christopher RECORD;
_profile_expired RECORD;
_campaign_beauty_for_all RECORD;
_sequence_general RECORD;
_campaign_gaming RECORD;
_profile_relay_employee RECORD;
_influencer_alice RECORD;
_influencer_bob RECORD;
_influencer_charlie RECORD;
_influencer_daniel RECORD;
_influencer_felicia RECORD;
_influencer_georgia RECORD;
_influencer_pewdiepie RECORD;
_influencer_mrbeast RECORD;
_influencer_cocomelon RECORD;
_influencer_social_profile_alice_1 RECORD;
_influencer_social_profile_bob_1 RECORD;
_influencer_social_profile_bob_2 RECORD;
_influencer_social_profile_charlie_1 RECORD;
_influencer_social_profile_daniel_1 RECORD;
_influencer_social_profile_felicia_1 RECORD;
_influencer_social_profile_georgia_1 RECORD;
_influencer_social_profile_pewdiepie RECORD;
_influencer_social_profile_mrbeast RECORD;
_influencer_social_profile_cocomelon RECORD;
_influencer_post_alice_1 RECORD;
_influencer_post_alice_2 RECORD;
_influencer_post_alice_3 RECORD;
_influencer_post_bob_1 RECORD;
_influencer_post_bob_2 RECORD;
_sequence_step_outreach RECORD;
_sequence_step_follow_up_1 RECORD;
_sequence_step_follow_up_2 RECORD;
_sequence_step_follow_up_3 RECORD;
_sequence_influencer_daniel RECORD;
_sequence_influencer_felicia RECORD;
_sequence_influencer_georgia RECORD;
BEGIN
-- Test Company
_company_test := create_company('Blue Moonlight Stream Enterprises', 'https://blue-moonlight-stream.com', 'active');
_company_expired := create_company('Expired Company', 'https://expired-company.com', 'canceled', '2019-01-01 00:00:00.000000+00', '2020-01-01 00:00:00.000000+00', '2019-01-01 00:00:00.000000+00', '2020-01-01 00:00:00.000000+00');

PERFORM create_company_category(_company_test.id, 'Video Game Streaming');

_profile_william := create_profile(
  _company_test.id,
  'william.edward.douglas@blue-moonlight-stream.com',
  'William Edward',
  'Douglas',
  'company_owner',
  'nqnwq6g9ooqhfexa',
  'test@example.com'
);
_profile_christopher := create_profile(
  _company_test.id,
  'christopher.david.thompson@blue-moonlight-stream.com',
  'Christopher David',
  'Thompson',
  'company_teammate',
  null,
  null
);

_profile_expired := create_profile(
  _company_expired.id,
  'expired_user@expired.com',
  'Expired',
  'User',
  'company_owner',
  'e7ustgsqqvy9al6f',
  'expired_user@example.com'
);

_campaign_beauty_for_all := create_campaign(
  _company_test.id,
  'Beauty for All Skin Tones',
  'A campaign promoting inclusivity and diversity in the beauty industry. \
  The "Shade Range" makeup line offers a variety of shades for all skin tones, \
  allowing everyone to feel confident and beautiful.',
  'Shade Range Makeup',
  ARRAY['beauty','inclusivity','makeup','diversity','confidence']
);

_sequence_general := create_sequence(
  _company_test.id,
  'General collaboration',
  _profile_william.first_name,
  _profile_william.id
);

_sequence_step_outreach := create_sequence_steps(
  _sequence_general.id,
  'Outreach',
  'AAABiYr-poEAAAAC',
  0,
  0
);

_sequence_step_follow_up_1 := create_sequence_steps(
  _sequence_general.id,
  '1st Follow-up',
  'AAABiYsMUIAAAAAD',
  1,
  24
);
_sequence_step_follow_up_2 := create_sequence_steps(
  _sequence_general.id,
  '2nd Follow-up',
  'AAABieM0bMMAAAAE',
  2,
  48
);
_sequence_step_follow_up_3 := create_sequence_steps(
  _sequence_general.id,
  '3rd Follow-up',
  'AAABieM1AhgAAAAF',
  3,
  72
);

PERFORM create_campaign_creator(
  _campaign_beauty_for_all.id,
  _profile_william.id,
  'https://yt3.googleusercontent.com/SOkJ3PucBImQs1fZSG7O_LSD98FOEzGGKlaaLzt5Hps_REGV8-Ueuh_qjxtWmrRYWskN2URWiQ=s480-c-k-c0x00ffffff-no-rj',
  'UCB_CCSAGP_YCuR36_w2bG1w',
  'Greg Renko'
);

_influencer_alice := create_influencer(
  'Alice Anderson',
  'alice.anderson@example.com',
  '123 Apple Street',
  '',
  false
);
_influencer_bob := create_influencer(
  'Bob-Recommended Brown',
  'bob.brown@example.com',
  '456 Bell Street',
  ''
);
_influencer_charlie := create_influencer(
  'Charlie Charles',
  'charlie.charles@example.com',
  '780 Elm Street',
  ''
);
_influencer_daniel := create_influencer(
  'Daniel Davis',
  'daniel.davis@example.com',
  '480 Elm Street',
  ''
);
_influencer_felicia := create_influencer(
  'Felicia Franklin',
  'felicia.franklin@example.com',
  '420 Elm Street',
  ''
);
_influencer_georgia := create_influencer(
  'Georgia Green',
  'georgia.green@example.com',
  '240 Elm Street',
  ''
);
_influencer_pewdiepie := create_influencer(
  'PewDiePie',
  'tech+pewdiepie@relay.club',
  null,
  'https://yt3.googleusercontent.com/5oUY3tashyxfqsjO5SGhjT4dus8FkN9CsAHwXWISFrdPYii1FudD4ICtLfuCw6-THJsJbgoY=s480-c-k-c0x00ffffff-no-rj'
);
_influencer_mrbeast := create_influencer(
  'MrBeast',
  'tech+mrbeast@relay.club',
  null,
  'https://yt3.googleusercontent.com/ytc/AOPolaSqRAadc5Tv116Y-UfQ--ZLK3bFTep0ZH1_aoLlTA=s480-c-k-c0x00ffffff-no-rj'
);
_influencer_cocomelon := create_influencer(
  'Cocomelon - Nursery Rhymes',
  'bounce@gmail.com',
  null,
  'https://yt3.googleusercontent.com/ytc/AOPolaRxd0DEuTsFcyk0wEHdVMk4r7nZhv_7A3AgQ7ndUA=s480-c-k-c0x00ffffff-no-rj'
);

_influencer_social_profile_alice_1 := create_influencer_social_profile(
  'https://instagram.com/alice1',
  'instagram',
  _influencer_alice.id,
  'iqdata:1',
  'alice1',
  _influencer_alice.name,
  _influencer_alice.email
);
_influencer_social_profile_bob_1 := create_influencer_social_profile(
  'https://instagram.com/bob1',
  'instagram',
  _influencer_bob.id,
  'iqdata:2',
  'bob1',
  _influencer_bob.name,
  _influencer_bob.email
);
_influencer_social_profile_bob_2 := create_influencer_social_profile(
  'https://youtube.com/bob2',
  'youtube',
  _influencer_bob.id,
  'iqdata:3',
  'bob2',
  _influencer_bob.name,
  _influencer_bob.email
);
_influencer_social_profile_charlie_1 := create_influencer_social_profile(
  'https://instagram.com/charlie1',
  'instagram',
  _influencer_charlie.id,
  'iqdata:4',
  'charlie1',
  _influencer_charlie.name,
  _influencer_charlie.email
);
_influencer_social_profile_daniel_1 := create_influencer_social_profile(
  'https://instagram.com/daniel1',
  'instagram',
  _influencer_daniel.id,
  'iqdata:5',
  'daniel1',
  _influencer_daniel.name,
  _influencer_daniel.email
);
_influencer_social_profile_felicia_1 := create_influencer_social_profile(
  'https://instagram.com/felicia1',
  'instagram',
  _influencer_felicia.id,
  'iqdata:6',
  'felicia1',
  _influencer_felicia.name,
  _influencer_felicia.email
);
_influencer_social_profile_georgia_1 := create_influencer_social_profile(
  'https://instagram.com/georgia1',
  'instagram',
  _influencer_georgia.id,
  'iqdata:7',
  'georgia1',
  _influencer_georgia.name,
  _influencer_georgia.email
);
_influencer_social_profile_pewdiepie := create_influencer_social_profile(
  'https://www.youtube.com/channel/UC-lHJZR3Gqxm24_Vd_AJ5Yw',
  'youtube',
  _influencer_pewdiepie.id,
  'iqdata:UC-lHJZR3Gqxm24_Vd_AJ5Yw',
  'PewDiePie',
  _influencer_pewdiepie.name,
  _influencer_pewdiepie.email,
  _influencer_pewdiepie.avatar_url,
  'Recent Video Title - Pewdiepie'
);
_influencer_social_profile_mrbeast := create_influencer_social_profile(
  'https://www.youtube.com/channel/UCX6OQ3DkcsbYNE6H8uQQuVA',
  'youtube',
  _influencer_mrbeast.id,
  'iqdata:UCX6OQ3DkcsbYNE6H8uQQuVA',
  'MrBeast6000',
  _influencer_mrbeast.name,
  _influencer_mrbeast.email,
  _influencer_mrbeast.avatar_url,
  'Recent Video Title - MrBeast'
);
_influencer_social_profile_cocomelon := create_influencer_social_profile(
  'https://www.youtube.com/channel/UCbCmjCuTUZos6Inko4u57UQ',
  'youtube',
  _influencer_cocomelon.id,
  'iqdata:UCbCmjCuTUZos6Inko4u57UQ',
  'checkgate',
  _influencer_cocomelon.name,
  _influencer_cocomelon.email,
  _influencer_cocomelon.avatar_url,
  'Recent Video Title - Cocomelon'
);

PERFORM create_sequence_influencer(
  _company_test.id,
  _sequence_general.id,
  _profile_william.id,
  _influencer_social_profile_alice_1.id,
  _influencer_social_profile_alice_1.email,
  'To Contact'
);

PERFORM create_sequence_influencer(
  _company_test.id,
  _sequence_general.id,
  _profile_william.id,
  _influencer_social_profile_bob_2.id,
  _influencer_social_profile_bob_2.email,
  'To Contact',
  0,
  '2020-01-01 00:00:00.000000+00'
);

PERFORM create_sequence_influencer(
  _company_test.id,
  _sequence_general.id,
  _profile_william.id,
  _influencer_social_profile_charlie_1.id,
  _influencer_social_profile_charlie_1.email,
  'To Contact',
  0,
  '2030-01-01 00:00:00.000000+00'
);

_sequence_influencer_daniel := create_sequence_influencer(
  _company_test.id,
  _sequence_general.id,
  _profile_william.id,
  _influencer_social_profile_daniel_1.id,
  _influencer_social_profile_daniel_1.email,
  'In Sequence'
);
_sequence_influencer_felicia := create_sequence_influencer(
  _company_test.id,
  _sequence_general.id,
  _profile_william.id,
  _influencer_social_profile_felicia_1.id,
  _influencer_social_profile_felicia_1.email,
  'In Sequence',
  1
);
_sequence_influencer_georgia := create_sequence_influencer(
  _company_test.id,
  _sequence_general.id,
  _profile_william.id,
  _influencer_social_profile_georgia_1.id,
  _influencer_social_profile_georgia_1.email,
  'Ignored',
  1
);

PERFORM create_sequence_email(
  _sequence_general.id,
  _sequence_influencer_daniel.id,
  _sequence_step_outreach.id,
  'Scheduled',
  null,
  '2024-08-01 00:00:00.000000+00',
  null
);
PERFORM create_sequence_email(
  _sequence_general.id,
  _sequence_influencer_daniel.id,
  _sequence_step_follow_up_1.id,
  null,
  'Scheduled',
  null,
  '2024-08-02 00:00:00.000000+00'
);
PERFORM create_sequence_email(
  _sequence_general.id,
  _sequence_influencer_felicia.id,
  _sequence_step_outreach.id,
  null,
  'Delivered',
  null,
  '2024-08-01 01:00:00.000000+00'
);
PERFORM create_sequence_email(
  _sequence_general.id,
  _sequence_influencer_felicia.id,
  _sequence_step_follow_up_1.id,
  '<d7e91ded-7a8e-37e8-6484-837e4e94c3ad@gmail.com>',
  'Delivered',
  'Opened',
  '2024-08-02 01:00:00.000000+00'
);
PERFORM create_sequence_email(
  _sequence_general.id,
  _sequence_influencer_georgia.id,
  _sequence_step_outreach.id,
  null,
  'Delivered',
  'Link Clicked',
  '2024-08-01 02:00:00.000000+00'
);
PERFORM create_sequence_email(
  _sequence_general.id,
  _sequence_influencer_georgia.id,
  _sequence_step_follow_up_1.id,
  null,
  'Bounced',
  null,
  '2024-08-02 02:00:00.000000+00'
);

PERFORM create_template_variable(
  _sequence_general.id,
  'marketingManagerName',
  'Marketing Manager Name',
  'Vivian'
);
PERFORM create_template_variable(
  _sequence_general.id,
  'brandName',
  'Brand Name',
  'Blue Moonlight Stream Industries'
);
PERFORM create_template_variable(
  _sequence_general.id,
  'productName',
  'Product Name',
  'Widget X'
);
PERFORM create_template_variable(
  _sequence_general.id,
  'productDescription',
  'Product Description'
);
PERFORM create_template_variable(
  _sequence_general.id,
  'productLink',
  'Product Link',
  'https://example.com/product'
);
PERFORM create_template_variable(
  _sequence_general.id,
  'productPrice',
  'Product Price',
  '450'
);
PERFORM create_template_variable(
  _sequence_general.id,
  'influencerNiche',
  'Influencer Niche',
  'Consumer Electronics'
);

-- Influencer 3 will have no social profiles so we can handle this edge case

_influencer_post_alice_1 := create_influencer_post(
  'https://instagram.com/alice/posts/1',
  _campaign_beauty_for_all.id,
  _influencer_social_profile_alice_1.id,
  'instagram'
);
_influencer_post_alice_2 := create_influencer_post(
  'https://instagram.com/alice/posts/2',
  _campaign_beauty_for_all.id,
  _influencer_social_profile_alice_1.id,
  'instagram'
);
_influencer_post_alice_3 := create_influencer_post(
  'https://instagram.com/alice/posts/3',
  _campaign_beauty_for_all.id,
  _influencer_social_profile_alice_1.id,
  'instagram'
);
_influencer_post_bob_1 := create_influencer_post(
  'https://instagram.com/bob/posts/1',
  _campaign_beauty_for_all.id,
  _influencer_social_profile_bob_1.id,
  'instagram'
);
_influencer_post_bob_2 := create_influencer_post(
  'https://youtube.com/bob/posts/1',
  _campaign_beauty_for_all.id,
  _influencer_social_profile_bob_2.id,
  'youtube'
);
PERFORM create_posts_performance(
  _campaign_beauty_for_all.id,
  _influencer_social_profile_alice_1.id,
  _influencer_post_alice_1.id,
  now(),
  123,
  456,
  789,
  3,
  250,
  150
);
PERFORM create_posts_performance(
  _campaign_beauty_for_all.id,
  _influencer_social_profile_alice_1.id,
  _influencer_post_alice_2.id,
  '2023-01-01 00:00:00.000000+00',
  1230,
  4560,
  7890,
  30,
  2500,
  1500
);
PERFORM create_posts_performance(
  _campaign_beauty_for_all.id,
  _influencer_social_profile_alice_1.id,
  _influencer_post_alice_3.id,
  '2023-01-02 00:00:00.000000+00'
);
PERFORM create_posts_performance(
  _campaign_beauty_for_all.id,
  _influencer_social_profile_bob_1.id,
  _influencer_post_bob_1.id,
  '2023-01-03 00:00:00.000000+00',
  12300,
  45600,
  78900,
  300,
  25000,
  15000
);
PERFORM create_posts_performance(
  _campaign_beauty_for_all.id,
  _influencer_social_profile_bob_2.id,
  _influencer_post_bob_2.id,
  '2023-01-04 00:00:00.000000+00',
  12301,
  45601,
  78901,
  301,
  25001,
  15001
);

-- Relay Club
_company_relay := create_company('Relay Club', 'https://relay.club', 'active');

PERFORM create_company_category(_company_test.id, 'Influencer Marketing');

_campaign_gaming := create_campaign(
  _company_relay.id,
  'The Future of Gaming is Here',
  'A campaign promoting the latest and greatest in gaming technology. \
  The "NeonX" gaming console offers high-performance graphics, immersive sound, \
  and a wide range of games to choose from.',
  'NeonX Gaming Console',
  ARRAY['gaming','technology','highperformance','graphics','sound']
);

_profile_relay_employee := create_profile(_company_relay.id, 'jacob@relay.club', 'Jacob', 'Cool', 'relay_employee', null, null);

PERFORM create_campaign_creator(
  _campaign_gaming.id,
  _profile_relay_employee.id,
  'https://yt3.googleusercontent.com/S3tNLpc5lGK6i3qKb-3pBxcVTp6Fa0TKpJO8lJW-1fgcksYvZn68S3Ha5ebkIQiNFMeskjTxUBA=s480-c-k-c0x00ffffff-no-rj',
  'UCxo4Q6Wy5Ag4ntlibuyTfIQ',
  'Yousef Gaming'
);

PERFORM create_boostbot_conversation(
    _profile_relay_employee.id,
    '[{"type":"translation","sender":"Bot","translationKey":"boostbot.chat.introMessageFirstTimeA"},{"type":"translation","sender":"Bot","translationKey":"boostbot.chat.introMessageFirstTimeB"},{"type":"translation","sender":"Bot","translationKey":"boostbot.chat.introMessageFirstTimeC"},{"text":"coffee","type":"text","sender":"User"},{"type":"progress","sender":"Neutral","progressData":{"topics":["coffee","coffeelover","morningroutine","caffeineboost","coffeetime"],"isMidway":true,"totalFound":403}},{"type":"translation","sender":"Bot","translationKey":"boostbot.chat.influencersFoundFirstTimeA"},{"type":"translation","sender":"Bot","translationKey":"boostbot.chat.influencersFoundFirstTimeB"}]',
    '[{"url":"https://www.youtube.com/channel/UCFcy7lNTEIT0qTRA_kwot8w","handle":"JessNicole____","topics":["coffee","coffe","cafe"],"picture":"https://yt3.googleusercontent.com/Qr_4xuKoWsfkJaePgR9V2YvEx6LaEmt2HIELwrjKgM24BgaG8SLWnkhLPrg02lA6HXXFzmBurA=s480-c-k-c0x00ffffff-no-rj","user_id":"UCFcy7lNTEIT0qTRA_kwot8w","distance":0.5077990293502808,"fullname":"JessNicole🤎","language":{"code":"en","name":"English"},"avg_views":354261,"followers":257000,"relevance":0.9748139768960017,"engagements":24499,"is_verified":false,"posts_count":261,"audience_geo":{"countries":[{"id":148838,"code":"US","name":"United States","weight":0.6202247191011236},{"id":1428125,"code":"CA","name":"Canada","weight":0.038202247191011236}]},"engagement_rate":0.09532684824902724,"audience_genders":[{"code":"MALE","weight":0.1798810703666997}],"followers_growth":0.031093279839518484,"audience_genders_per_age":[{"code":"13-17","male":0.014855528252905181},{"code":"18-24","male":0.0823512979237135},{"code":"25-34","male":0.059099166745253215},{"code":"35-44","male":0.01808499091658022},{"code":"45-64","male":0.005490086528247566}]},{"url":"https://www.youtube.com/channel/UCG9rqLCUj6sXWI3wCM6Ymsw","handle":"FlameMonroe","topics":["coffee","coffe","cafe"],"picture":"https://yt3.googleusercontent.com/ytc/APkrFKY3bJBww6I70TAWQi5qEVNjKR4bwbPKDCBDGmXcQV0=s480-c-k-c0x00ffffff-no-rj","user_id":"UCG9rqLCUj6sXWI3wCM6Ymsw","distance":0.41611355543136597,"fullname":"Flame Monroe","language":{"code":"en","name":"English"},"avg_views":6191,"followers":62100,"relevance":0.974366923225777,"custom_name":"FlameMonroe","engagements":732,"is_verified":false,"posts_count":951,"audience_geo":{"countries":[{"id":148838,"code":"US","name":"United States","weight":0.9452054794520548}]},"engagement_rate":0.01178743961352657,"audience_genders":[{"code":"MALE","weight":0.20418636056718434}],"followers_growth":0.001612903225806539,"audience_genders_per_age":[{"code":"13-17","male":0.004119033210289021},{"code":"18-24","male":0.049820687400638636},{"code":"25-34","male":0.10415269688873667},{"code":"35-44","male":0.039760225077685396},{"code":"45-64","male":0.015081464684639287}]},{"url":"https://www.youtube.com/channel/UCUYbOZ1Zo8nbBaz14mGUNRA","handle":"EmenseCoffee","topics":["coffee","coffe","cafe"],"picture":"https://yt3.googleusercontent.com/H-WWRyeup-8oXcQKZ76UgKbdc7P3fzwWiFVjCrAjn72Pg_OP7nRctuk9SFJ5mm0I76YboPgS=s480-c-k-c0x00ffffff-no-rj","user_id":"UCUYbOZ1Zo8nbBaz14mGUNRA","distance":0.47683942317962646,"fullname":"Emense Coffee Movement","language":{"code":"en","name":"English"},"avg_views":1169,"followers":3480,"relevance":0.9608081426462292,"custom_name":"EmenseLogic","engagements":86,"is_verified":false,"posts_count":117,"audience_geo":{"countries":[{"id":148838,"code":"US","name":"United States","weight":0.5686274509803921},{"id":1428125,"code":"CA","name":"Canada","weight":0.19607843137254902}]},"engagement_rate":0.02471264367816092,"audience_genders":[{"code":"MALE","weight":0.7787610619469025}],"followers_growth":0.06683016554261179,"audience_genders_per_age":[{"code":"13-17","male":0.013051861373411779},{"code":"18-24","male":0.17837543876996098},{"code":"25-34","male":0.29584219113066695},{"code":"35-44","male":0.17402481831215702},{"code":"45-64","male":0.11746675236070601}]},{"url":"https://www.tiktok.com/@6792963074171536389","topics":["coffee","morningcoffee","coffeetime"],"picture":"https://p16-amd-va.tiktokcdn.com/tos-maliva-avt-0068/d7f80c95b4739c721b41d45f3b76c77e~c5_720x720.jpeg","user_id":"6792963074171536389","distance":0.2171088457107544,"fullname":"Alex Gren Coffee","language":{"code":"en","name":"English"},"username":"alex.altitudecoffee","avg_views":92271,"followers":143900,"relevance":0.9880171068092313,"engagements":7329,"is_verified":false,"posts_count":394,"audience_geo":{"countries":[{"id":148838,"code":"US","name":"United States","weight":0.9557728119180633}]},"engagement_rate":0.05093120222376651,"audience_genders":[{"code":"MALE","weight":0.09651257096512572}],"followers_growth":0.18378729670365823,"audience_genders_per_age":[{"code":"13-17","male":0.007447915444254073},{"code":"18-24","male":0.048101120577474225},{"code":"25-34","male":0.032274300258434314},{"code":"35-44","male":0.0043446173424815425},{"code":"45-64","male":0.0043446173424815425}]},{"url":"https://www.tiktok.com/@6807171977842967557","topics":["coffee","morningcoffee","coffeetime"],"picture":"https://p16-amd-va.tiktokcdn.com/tos-maliva-avt-0068/bbcde8fb5ab6822771800e105341eaee~c5_720x720.jpeg","user_id":"6807171977842967557","distance":0.2637922763824463,"fullname":"Cat ☕️ Herrington","language":{"code":"en","name":"English"},"username":"mamamadecoffee","avg_views":61628,"followers":112500,"relevance":0.9868806511726272,"engagements":3601,"is_verified":false,"posts_count":428,"audience_geo":{"countries":[{"id":148838,"code":"US","name":"United States","weight":0.8575827559661278}]},"engagement_rate":0.03200888888888889,"audience_genders":[{"code":"MALE","weight":0.13938753959873287}],"followers_growth":0.053518752633796796,"audience_genders_per_age":[{"code":"13-17","male":0.009472939584379902},{"code":"18-24","male":0.06089746875672794},{"code":"25-34","male":0.05548436042279657},{"code":"35-44","male":0.012179493751345588},{"code":"45-64","male":0.001353277083482843}]},{"url":"https://www.tiktok.com/@531298","topics":["coffee","morningcoffee","coffeetime"],"picture":"https://p16-amd-va.tiktokcdn.com/tos-maliva-avt-0068/77dc73a2e11215a99e33493a0b9cca70~c5_720x720.jpeg","user_id":"531298","distance":0.24593794345855713,"fullname":"kam 🫧","language":{"code":"en","name":"English"},"username":"kmaeleee","avg_views":94897,"followers":137700,"relevance":0.9853448055434582,"engagements":12260,"is_verified":false,"posts_count":519,"audience_geo":{"countries":[{"id":148838,"code":"US","name":"United States","weight":0.9530217763640813}]},"engagement_rate":0.08903413217138707,"audience_genders":[{"code":"MALE","weight":0.2256584788398935}],"followers_growth":0.3317472291533685,"audience_genders_per_age":[{"code":"13-17","male":0.022832504875232945},{"code":"18-24","male":0.13449511995848895},{"code":"25-34","male":0.05849787745406397},{"code":"35-44","male":0.006999746020144407},{"code":"45-64","male":0.002833230531963212},{"code":"65-","male":0}]},{"url":"https://www.instagram.com/hiddenhousecoffee/","topics":["coffee","coffeetime","coffeeshop"],"picture":"https://imgp.sptds.icu/v2?mb0KwpL92uYofJiSjDn1%2F6peL1lBwv3s%2BUvShHERlDYvy61sBcp4g%2BGwAUOgcFcWGvCDo8w2cKGppDsqRfC0G2vCZFd8uCr3niwp1Vx7qmWG9Aqm5T8zOhYhQhGfOHVCrOPQt%2BBH8xfdE2dL1avFgg%3D%3D","user_id":"192296273","distance":0.1274322271347046,"fullname":"Hidden House Coffee","language":{"code":"en","name":"English"},"username":"hiddenhousecoffee","followers":31756,"relevance":0.9924956901344902,"engagements":4287,"is_verified":false,"posts_count":2304,"account_type":2,"audience_geo":{"countries":[{"id":148838,"code":"US","name":"United States","weight":0.8242176487172258}]},"avg_reels_plays":91472,"engagement_rate":0.1349981105932737,"audience_genders":[{"code":"MALE","weight":0.3943247813319241}],"followers_growth":0.011176564241362819,"audience_genders_per_age":[{"code":"13-17","male":0.004275250067883283},{"code":"18-24","male":0.05194428832478188},{"code":"25-34","male":0.18105684037485703},{"code":"35-44","male":0.11393541430908947},{"code":"45-64","male":0.04284508342610784},{"code":"65-","male":0.00026790482920453724}]},{"url":"https://www.instagram.com/coolroastcurves/","topics":["coffee","coffeetime","coffeeshop"],"picture":"https://imgp.sptds.icu/v2?mb0KwpL92uYofJiSjDn1%2F6peL1lBwv3s%2BUvShHERlDZ3hO83MAgPktReUEKksMEzopiXrLiU2O2DlTCzei3bF1%2FY2yeYnznSuTF4uAJJ4WD9wVu%2FCtt5Uk4GKsgc4o36Wwq5%2BhsabX0Nc9aXCBbcsw%3D%3D","user_id":"3260706682","distance":0.11256718635559082,"fullname":"Noah Poletiek","language":{"code":"en","name":"English"},"username":"coolroastcurves","followers":7478,"relevance":0.9916068510403803,"engagements":443,"is_verified":false,"posts_count":1095,"account_type":2,"audience_geo":{"countries":[{"id":148838,"code":"US","name":"United States","weight":0.7331771007700033},{"id":1428125,"code":"CA","name":"Canada","weight":0.02644794107800469}]},"avg_reels_plays":5548,"engagement_rate":0.05924043861995186,"audience_genders":[{"code":"MALE","weight":0.6588884174798474}],"followers_growth":0.0008029978586723274,"audience_genders_per_age":[{"code":"13-17","male":0.008509629008042308},{"code":"18-24","male":0.09846856423591813},{"code":"25-34","male":0.2978370152814808},{"code":"35-44","male":0.17748654788202528},{"code":"45-64","male":0.07658666107238077},{"code":"65-","male":0}]},{"url":"https://www.instagram.com/ethanrode/","topics":["coffee","coffeetime","coffeeshop"],"picture":"https://imgp.sptds.icu/v2?mb0KwpL92uYofJiSjDn1%2F6peL1lBwv3s%2BUvShHERlDbuwW0Ef%2BRcyAokGxb3wwGtUrLuSWrHC2yHKJKQLlhY%2FjK69cisyue5LYIwRiV1JxYruIraO4Z7Gg4XRavzKV1cWwq5%2BhsabX0Nc9aXCBbcsw%3D%3D","user_id":"183549820","distance":0.14835870265960693,"fullname":"Ethan Rode","language":{"code":"en","name":"English"},"username":"ethanrode","followers":365211,"relevance":0.9908326007932954,"engagements":11114,"is_verified":true,"posts_count":642,"account_type":2,"audience_geo":{"countries":[{"id":148838,"code":"US","name":"United States","weight":0.39263981454650826},{"id":1428125,"code":"CA","name":"Canada","weight":0.03824978267168937}]},"avg_reels_plays":443452,"engagement_rate":0.030431723031343526,"audience_genders":[{"code":"MALE","weight":0.5585069201733539}],"followers_growth":0.05738730131156089,"audience_genders_per_age":[{"code":"13-17","male":0.0338120478676377},{"code":"18-24","male":0.2413061257891842},{"code":"25-34","male":0.2245217279268317},{"code":"35-44","male":0.04865042858652907},{"code":"45-64","male":0.009973337860238459},{"code":"65-","male":0.00024325214293264538}]},{"url":"https://www.youtube.com/channel/UCCmjfbkozyekbDea8qyIrmg","handle":"jbinthehills","topics":["coffee shop","starbucks","bestcoffee"],"picture":"https://yt3.googleusercontent.com/ytc/APkrFKbVjyccciZflD0vpVWhOtsCtKsx5daHadNe8E0l4g=s480-c-k-c0x00ffffff-no-rj","user_id":"UCCmjfbkozyekbDea8qyIrmg","distance":0.5375338792800903,"fullname":"J & B In The Hills","language":{"code":"en","name":"English"},"avg_views":15171,"followers":47500,"relevance":0.9710455339205335,"engagements":511,"is_verified":false,"posts_count":941,"audience_geo":{"countries":[{"id":148838,"code":"US","name":"United States","weight":0.8418708240534521},{"id":1428125,"code":"CA","name":"Canada","weight":0.031180400890868598}]},"engagement_rate":0.010757894736842105,"audience_genders":[{"code":"MALE","weight":0.46831955922865015}],"followers_growth":0.04586388356782711,"audience_genders_per_age":[{"code":"13-17","male":0.01569786232051341},{"code":"18-24","male":0.08372193237607153},{"code":"25-34","male":0.14128076088462072},{"code":"35-44","male":0.12613421315217016},{"code":"45-64","male":0.13628908624492964},{"code":"65-","male":0.0016034010146462308}]},{"url":"https://www.youtube.com/channel/UCkMCbkTpbDh2rwtYjJzYQxA","handle":"everydayfea","topics":["coffee shop","starbucks","bestcoffee"],"picture":"https://yt3.googleusercontent.com/CMv2AJxzv9oKOydanh4XMex_ttMtynd9vH1qYs_74bE_rGRRsqG3mkPkvGjvCQR-vdN1WLDDmvs=s480-c-k-c0x00ffffff-no-rj","user_id":"UCkMCbkTpbDh2rwtYjJzYQxA","distance":0.5480080842971802,"fullname":"EveryDayFea","language":{"code":"en","name":"English"},"avg_views":1221,"followers":3250,"relevance":0.955685913299201,"engagements":89,"is_verified":false,"posts_count":263,"audience_geo":{"countries":[{"id":148838,"code":"US","name":"United States","weight":0.972972972972973}]},"engagement_rate":0.027384615384615386,"audience_genders":[{"code":"MALE","weight":0.8461538461538463}],"followers_growth":0.05177993527508096,"audience_genders_per_age":[{"code":"13-17","male":0},{"code":"18-24","male":0.06669192876089429},{"code":"25-34","male":0.31261841606669194},{"code":"35-44","male":0.3084501705191361},{"code":"45-64","male":0.15839333080712392}]},{"url":"https://www.tiktok.com/@6948174171005158405","topics":["coffee","morningcoffee","coffeetime"],"picture":"https://p16-amd-va.tiktokcdn.com/tos-maliva-avt-0068/190a9fa770fcd9b167b7eeccb8d92978~c5_720x720.jpeg","user_id":"6948174171005158405","distance":0.3229454755783081,"fullname":"Golden Brown Coffee","language":{"code":"en","name":"English"},"username":"goldenbrown.coffee","avg_views":147277,"followers":501100,"relevance":0.9845402808293896,"engagements":6060,"is_verified":false,"posts_count":548,"audience_geo":{"countries":[{"id":1428125,"code":"CA","name":"Canada","weight":0.03550936451228754}]},"engagement_rate":0.012093394532029535,"audience_genders":[{"code":"MALE","weight":0.3954227590591228}],"followers_growth":0.031197267152323294,"audience_genders_per_age":[{"code":"13-17","male":0.01871264490767359},{"code":"18-24","male":0.18712644907673587},{"code":"25-34","male":0.14875607618524356},{"code":"35-44","male":0.029486591975728078},{"code":"45-64","male":0.01134099691374157}]}]'
);

END;
$$;

-- cleanup
DROP FUNCTION IF EXISTS create_company;

DROP FUNCTION IF EXISTS create_company_category;

DROP FUNCTION IF EXISTS create_profile;

DROP FUNCTION IF EXISTS create_supabase_user;

DROP FUNCTION IF EXISTS create_campaign;

DROP FUNCTION IF EXISTS create_campaign_creator;

DROP FUNCTION IF EXISTS create_influencer;

DROP FUNCTION IF EXISTS create_influencer_social_profile;

DROP FUNCTION IF EXISTS create_influencer_post;

DROP FUNCTION IF EXISTS create_posts_performance;

DROP FUNCTION IF EXISTS create_sequence;

DROP FUNCTION IF EXISTS create_sequence_influencer;

DROP FUNCTION IF EXISTS create_sequence_steps;

DROP FUNCTION IF EXISTS create_sequence_email;

DROP FUNCTION IF EXISTS create_template_variable;

DROP FUNCTION IF EXISTS create_boostbot_conversation;

COMMIT;
